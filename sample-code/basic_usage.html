<!doctype HTML>

<style>
#container {
  width: 200px;
  height: 50px;
  contain: content;
  background: lightblue;
}
</style>

<script>
async function updateLockable() {
  let element = document.createElement("div");
  
  // Construct the element.
  element.id = "container";
  element.innerHTML = "Lorem ipsum."

  // Get the lock if the user-agent supports getDisplayLock.
  let lock = element.getDisplayLock && element.getDisplayLock();
  // Await lock acquisition.
  lock && await lock.acquire();

  // Attach the element.
  document.body.appendChild(element);

  // Update, which does co-operative updates. After that finishes, commit.
  lock && lock.update().then(() => { lock.commit(); });
}

window.onload = updateLockable;
</script>

